{"ast":null,"code":"import axios from \"axios\";\nimport M from \"materialize-css/dist/js/materialize.min.js\";\nimport { error_message, success_message, error_message_with_button, success_message_with_button } from \"../components/inc/Messages\"; //import todo types\n\nimport { ADD_TODO, DELETE_TODO, TODO_ERRORS, UPDATE_TODO, GET_TODOS, GET_TODO, SET_TODO_LOADING, CLEAR_TODO_ERRORS, CLEAR_TODO_CURRENT, CLEAR_TODOS } from \"./types\"; //configuration to append to request to be made\n\nconst config = {\n  headers: {\n    \"Content-Type\": \"application/json\",\n    \"Access-Control-Allow-Origin\": \"*\"\n  }\n};\n/**\n * persist ITEM to server and dispatch to reducer\n * @param {id} id \n * @param {item} item \n * @returns \n */\n\nexport const addTodo = (id, item) => async dispatch => {\n  await axios.post(`${process.env.REACT_APP_API_URL}/additem/${id}`, item, config).then(res => {\n    dispatch({\n      type: ADD_TODO,\n      payload: res.data\n    });\n    M.toast({\n      html: success_message_with_button(\"add\", res.data.message)\n    });\n  }).catch(err => {\n    var _err$response, _err$response$data, _err$response2, _err$response2$data;\n\n    dispatch({\n      type: TODO_ERRORS,\n      payload: (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.errors\n    });\n    let errors = (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.errors;\n    errors ? M.toast({\n      html: error_message_with_button(\"add\", errors[Object.keys(errors)[0]])\n    }) : M.toast({\n      html: error_message('Something went Wrong, refresh and try again')\n    });\n  });\n};\n/**\n * get todos of a todolist by passing in the todolist id\n * @param {id} id \n * @returns \n */\n\nexport const getTodos = id => async dispatch => {\n  try {\n    const res = await fetch(`${process.env.REACT_APP_API_URL}/todos/${id}`);\n    const data = await res.json();\n    dispatch({\n      type: GET_TODOS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: TODO_ERRORS,\n      payload: \"Something went wrong\"\n    });\n  }\n};\n/**\n * Delete a todo item by passing in the todo item id\n * @param {id} id \n * @returns \n */\n\nexport const deleteTodo = id => async dispatch => {\n  await axios.delete(`${process.env.REACT_APP_API_URL}/todo/${id}`, config).then(res => {\n    dispatch({\n      type: DELETE_TODO,\n      payload: id\n    });\n  }).catch(err => {\n    var _err$response3, _err$response3$data;\n\n    dispatch({\n      type: TODO_ERRORS,\n      payload: (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.errors\n    });\n  });\n};\n/**\n * update a todo item by passing in the todo id and the item\n * The id is the todo item id, and item carries the information \n * of the todo\n * @param {id} id \n * @param {item} item \n * @returns \n */\n\nexport const updateTodo = (id, item) => async dispatch => {\n  await axios.post(`${process.env.REACT_APP_API_URL}/updatetodo/${id}`, item, config).then(res => {\n    dispatch({\n      type: UPDATE_TODO,\n      payload: res.data\n    });\n    M.toast({\n      html: success_message_with_button(\"add\", res.data.message)\n    });\n  }).catch(err => {\n    var _err$response4, _err$response4$data, _err$response5, _err$response5$data;\n\n    dispatch({\n      type: TODO_ERRORS,\n      payload: (_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.errors\n    });\n    let errors = (_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.errors;\n    M.toast({\n      html: error_message_with_button(\"edit\", errors[Object.keys(errors)[0]])\n    });\n  });\n};\n/**\n * Update status of a todo.\n * @param {id} id \n * @param {status} status \n * @returns \n */\n\nexport const updateStatus = (id, status) => async dispatch => {\n  //destructure main status of todo\n  let stat = {\n    status: status\n  };\n  await axios.post(`${process.env.REACT_APP_API_URL}/updatestatus/${id}`, stat, config).then(res => {\n    M.toast({\n      html: success_message(res.data.message)\n    });\n    dispatch({\n      type: CLEAR_TODO_ERRORS\n    });\n  }).catch(err => {\n    var _err$response6, _err$response6$data;\n\n    let errors = (_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.errors;\n    M.toast({\n      html: error_message(errors[Object.keys(errors)[0]])\n    });\n  });\n};\n/**\n * set the current of state to the data that came in\n * @param {current} data \n * @returns \n */\n\nexport const setCurrent = data => {\n  return {\n    type: GET_TODO,\n    payload: data\n  };\n};\n/**\n * clear/set any error in state errors to null\n * @returns \n */\n\nexport const clearErrors = () => {\n  return {\n    type: CLEAR_TODO_ERRORS\n  };\n};\n/**\n * clear all todos in state by setting todos to null\n * @returns \n */\n\nexport const clearTodos = () => {\n  return {\n    type: CLEAR_TODOS\n  };\n};\n/**\n * \n * @returns sets the current state to null\n */\n\nexport const clearCurrent = () => {\n  return {\n    type: CLEAR_TODO_CURRENT\n  };\n};\n/**\n * \n * @returns sets loading in state to true\n */\n\nexport const setLoading = () => {\n  return {\n    type: SET_TODO_LOADING\n  };\n};","map":{"version":3,"sources":["/home/generous/projects/todo/src/actions/TodoActions.js"],"names":["axios","M","error_message","success_message","error_message_with_button","success_message_with_button","ADD_TODO","DELETE_TODO","TODO_ERRORS","UPDATE_TODO","GET_TODOS","GET_TODO","SET_TODO_LOADING","CLEAR_TODO_ERRORS","CLEAR_TODO_CURRENT","CLEAR_TODOS","config","headers","addTodo","id","item","dispatch","post","process","env","REACT_APP_API_URL","then","res","type","payload","data","toast","html","message","catch","err","response","errors","Object","keys","getTodos","fetch","json","error","deleteTodo","delete","updateTodo","updateStatus","status","stat","setCurrent","clearErrors","clearTodos","clearCurrent","setLoading"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport M from \"materialize-css/dist/js/materialize.min.js\";\nimport { error_message, success_message, error_message_with_button,success_message_with_button} from \"../components/inc/Messages\"\n\n//import todo types\nimport {\n  ADD_TODO,\n  DELETE_TODO,\n  TODO_ERRORS,\n  UPDATE_TODO,\n  GET_TODOS,\n  GET_TODO,\n  SET_TODO_LOADING,\n  CLEAR_TODO_ERRORS,\n  CLEAR_TODO_CURRENT,\n  CLEAR_TODOS,\n} from \"./types\";\n\n//configuration to append to request to be made\nconst config = {\n  headers: {\n    \"Content-Type\": \"application/json\",\n    \"Access-Control-Allow-Origin\": \"*\",\n  },\n};\n\n\n\n/**\n * persist ITEM to server and dispatch to reducer\n * @param {id} id \n * @param {item} item \n * @returns \n */\nexport const addTodo = (id, item) => async (dispatch) => {\n  await axios\n    .post(`${process.env.REACT_APP_API_URL}/additem/${id}`, item, config)\n    .then((res) => {\n      dispatch({\n        type: ADD_TODO,\n        payload: res.data,\n      });\n      M.toast({ html: success_message_with_button(\"add\", res.data.message) });\n    })\n    .catch((err) => {\n      dispatch({\n        type: TODO_ERRORS,\n        payload: err.response?.data?.errors,\n      });\n      let errors = err.response?.data?.errors;\n      errors ? M.toast({ html: error_message_with_button(\"add\", errors[Object.keys(errors)[0]])})\n            :  M.toast({html: error_message('Something went Wrong, refresh and try again')})\n    });\n};\n\n\n\n\n/**\n * get todos of a todolist by passing in the todolist id\n * @param {id} id \n * @returns \n */\nexport const getTodos = (id) => async (dispatch) => {\n  try {\n    const res = await fetch(`${process.env.REACT_APP_API_URL}/todos/${id}`);\n    const data = await res.json();\n    dispatch({\n      type: GET_TODOS,\n      payload: data,\n    });\n  } catch (error) {\n    dispatch({\n      type: TODO_ERRORS,\n      payload: \"Something went wrong\",\n    });\n  }\n};\n\n\n\n\n/**\n * Delete a todo item by passing in the todo item id\n * @param {id} id \n * @returns \n */\nexport const deleteTodo = (id) => async (dispatch) => {\n  await axios\n    .delete(`${process.env.REACT_APP_API_URL}/todo/${id}`, config)\n    .then((res) => {\n      dispatch({\n        type: DELETE_TODO,\n        payload: id,\n      });\n    })\n    .catch((err) => {\n      dispatch({\n        type: TODO_ERRORS,\n        payload: err.response?.data?.errors,\n      });\n    });\n};\n\n\n\n\n/**\n * update a todo item by passing in the todo id and the item\n * The id is the todo item id, and item carries the information \n * of the todo\n * @param {id} id \n * @param {item} item \n * @returns \n */\nexport const updateTodo = (id, item) => async (dispatch) => {\n  await axios\n    .post(`${process.env.REACT_APP_API_URL}/updatetodo/${id}`, item, config)\n    .then((res) => {\n      dispatch({\n        type: UPDATE_TODO,\n        payload: res.data,\n      });\n      M.toast({ html: success_message_with_button(\"add\", res.data.message) });\n    })\n    .catch((err) => {\n      dispatch({\n        type: TODO_ERRORS,\n        payload: err.response?.data?.errors,\n      });\n      let errors = err.response?.data?.errors;\n      M.toast({\n        html: error_message_with_button(\"edit\", errors[Object.keys(errors)[0]]),\n      });\n    });\n};\n\n\n\n\n\n/**\n * Update status of a todo.\n * @param {id} id \n * @param {status} status \n * @returns \n */\nexport const updateStatus = (id, status) => async (dispatch) => {\n  //destructure main status of todo\n  let stat = { status: status };\n  await axios\n    .post(`${process.env.REACT_APP_API_URL}/updatestatus/${id}`, stat, config)\n    .then((res) => {\n      M.toast({ html: success_message(res.data.message) });\n      dispatch({\n        type: CLEAR_TODO_ERRORS,\n      });\n    })\n    .catch((err) => {\n      let errors = err.response?.data?.errors;\n      M.toast({ html: error_message(errors[Object.keys(errors)[0]]) });\n    });\n};\n\n\n\n\n/**\n * set the current of state to the data that came in\n * @param {current} data \n * @returns \n */\nexport const setCurrent = (data) => {\n  return { type: GET_TODO, payload: data};\n};\n\n\n\n\n/**\n * clear/set any error in state errors to null\n * @returns \n */\nexport const clearErrors = () => {\n  return { type: CLEAR_TODO_ERRORS };\n};\n\n\n\n\n/**\n * clear all todos in state by setting todos to null\n * @returns \n */\nexport const clearTodos = () => {\n  return {type: CLEAR_TODOS};\n};\n\n\n\n\n/**\n * \n * @returns sets the current state to null\n */\nexport const clearCurrent = () => {\n  return { type: CLEAR_TODO_CURRENT };\n};\n\n\n\n\n/**\n * \n * @returns sets loading in state to true\n */\nexport const setLoading = () => {\n  return {type: SET_TODO_LOADING };\n};\n"]},"metadata":{},"sourceType":"module"}