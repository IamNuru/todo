{"ast":null,"code":"import axios from \"axios\";\nimport M from \"materialize-css/dist/js/materialize.min.js\";\nimport { ADD_TODO, DELETE_TODO, TODO_ERRORS, UPDATE_TODO, GET_TODOS, GET_TODO, SET_TODO_LOADING, CLEAR_TODO_ERRORS, CLEAR_TODO_CURRENT, CLEAR_TODOS } from \"./types\";\nconst config = {\n  headers: {\n    \"Content-Type\": \"application/json\",\n    \"Access-Control-Allow-Origin\": \"*\"\n  }\n}; //messages for toast\n\nconst error_message = message => {\n  return `<span class=\"error_messge_icon small\"></span> <span>${message}</span>`;\n};\n\nconst success_message = message => {\n  return `<span class=\"success_messge_icon small\"></span> <span>${message}</span>`;\n};\n\nconst error_message_with_button = (type, message) => {\n  return `<span class=\"error_messge_icon small\"></span> <span>${message}</span><a class=\"btn-flat toast-action modal-trigger\" href='\"#\"${type}\"_todo_modal\"'>Retry</a>`;\n};\n\nconst success_message_with_button = message => {\n  return `<span class=\"success_messge_icon small\"></span> <span>${message}</span><a class=\"btn-flat toast-action modal-trigger\" href=\"#add_todo_modal\">Add New</a>`;\n}; //actions\n//add todo item to server\n\n\nexport const addTodo = (id, item) => async dispatch => {\n  console.log(id);\n  await axios.post(`${process.env.REACT_APP_API_URL}/additem/${id}`, item, config).then(res => {\n    console.log(res);\n    dispatch({\n      type: ADD_TODO,\n      payload: res.data\n    });\n  }).catch(err => {\n    dispatch({\n      type: TODO_ERRORS,\n      payload: err.response.data.errors\n    });\n  });\n}; //get todos from server\n\nexport const getTodos = id => async dispatch => {\n  try {\n    const res = await fetch(`${process.env.REACT_APP_API_URL}/todos/${id}`);\n    const data = await res.json();\n    dispatch({\n      type: GET_TODOS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: TODO_ERRORS,\n      payload: \"Something went wrong\"\n    });\n  }\n}; //delete todo from server\n\nexport const deleteTodo = id => async dispatch => {\n  await axios.delete(`${process.env.REACT_APP_API_URL}/todo/${id}`, config).then(res => {\n    dispatch({\n      type: DELETE_TODO,\n      payload: id\n    });\n  }).catch(err => {\n    dispatch({\n      type: TODO_ERRORS,\n      payload: err.response.data.errors\n    });\n  });\n}; //update a todo item\n\nexport const updateTodo = (id, item) => async dispatch => {\n  await axios.post(`${process.env.REACT_APP_API_URL}/updatetodo/${id}`, item, config).then(res => {\n    dispatch({\n      type: UPDATE_TODO,\n      payload: res.data\n    });\n    M.toast({\n      html: success_message_with_button('edit', res.data.message)\n    });\n  }).catch(err => {\n    dispatch({\n      type: TODO_ERRORS,\n      payload: err.response.data.errors\n    });\n  });\n}; //update a todo item\n\nexport const updateStatus = (id, status) => async dispatch => {\n  let stat = {\n    status: status\n  };\n  await axios.post(`${process.env.REACT_APP_API_URL}/updatestatus/${id}`, stat, config).then(res => {\n    M.toast({\n      html: success_message(res.data.message)\n    });\n    dispatch({\n      type: CLEAR_TODO_ERRORS\n    });\n  }).catch(err => {\n    let errors = err.response.data.errors;\n    M.toast({\n      html: error_message(errors[Object.keys(errors)[0]])\n    });\n  });\n}; //set the current\n\nexport const setCurrent = data => {\n  return {\n    type: GET_TODO,\n    payload: data\n  };\n}; //clear todo errors\n\nexport const clearErrors = () => {\n  return {\n    type: CLEAR_TODO_ERRORS\n  };\n}; //clear stodos\n\nexport const clearTodos = () => {\n  return {\n    type: CLEAR_TODOS\n  };\n}; //clear current\n\nexport const clearCurrent = () => {\n  return {\n    type: CLEAR_TODO_CURRENT\n  };\n}; //set loading\n\nexport const setLoading = () => {\n  console.log(\"loadingS\");\n  return {\n    type: SET_TODO_LOADING\n  };\n};","map":{"version":3,"sources":["/home/generous/projects/todo/src/actions/TodoActions.js"],"names":["axios","M","ADD_TODO","DELETE_TODO","TODO_ERRORS","UPDATE_TODO","GET_TODOS","GET_TODO","SET_TODO_LOADING","CLEAR_TODO_ERRORS","CLEAR_TODO_CURRENT","CLEAR_TODOS","config","headers","error_message","message","success_message","error_message_with_button","type","success_message_with_button","addTodo","id","item","dispatch","console","log","post","process","env","REACT_APP_API_URL","then","res","payload","data","catch","err","response","errors","getTodos","fetch","json","error","deleteTodo","delete","updateTodo","toast","html","updateStatus","status","stat","Object","keys","setCurrent","clearErrors","clearTodos","clearCurrent","setLoading"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport M from \"materialize-css/dist/js/materialize.min.js\";\n\n\nimport {\n  ADD_TODO,\n  DELETE_TODO,\n  TODO_ERRORS,\n  UPDATE_TODO,\n  GET_TODOS,\n  GET_TODO,\n  SET_TODO_LOADING,\n  CLEAR_TODO_ERRORS,\n  CLEAR_TODO_CURRENT,\n  CLEAR_TODOS,\n} from \"./types\";\n\nconst config = {\n  headers: {\n    \"Content-Type\": \"application/json\",\n    \"Access-Control-Allow-Origin\": \"*\",\n  },\n};\n//messages for toast\nconst error_message = (message) => {\n  return `<span class=\"error_messge_icon small\"></span> <span>${message}</span>`;\n};\nconst success_message = (message) => {\n  return `<span class=\"success_messge_icon small\"></span> <span>${message}</span>`;\n};\nconst error_message_with_button = (type, message) => {\n  return `<span class=\"error_messge_icon small\"></span> <span>${message}</span><a class=\"btn-flat toast-action modal-trigger\" href='\"#\"${type}\"_todo_modal\"'>Retry</a>`;\n};\nconst success_message_with_button = (message) => {\n  return `<span class=\"success_messge_icon small\"></span> <span>${message}</span><a class=\"btn-flat toast-action modal-trigger\" href=\"#add_todo_modal\">Add New</a>`;\n};\n\n\n//actions\n\n//add todo item to server\nexport const addTodo = (id, item) => async (dispatch) => {\n  console.log(id)\n  await axios\n    .post(`${process.env.REACT_APP_API_URL}/additem/${id}`, item, config)\n    .then((res) => {\n      console.log(res)\n      dispatch({\n        type: ADD_TODO,\n        payload: res.data,\n      });\n    })\n    .catch((err) => {\n      dispatch({\n        type: TODO_ERRORS,\n        payload: err.response.data.errors,\n      });\n    });\n};\n\n//get todos from server\nexport const getTodos = (id) => async (dispatch) => {\n    try {\n      const res = await fetch(`${process.env.REACT_APP_API_URL}/todos/${id}`);\n      const data = await res.json();\n      dispatch({\n        type: GET_TODOS,\n        payload: data,\n      });\n    } catch (error) {\n      dispatch({\n        type: TODO_ERRORS,\n        payload: \"Something went wrong\",\n      });\n    }\n  };\n\n//delete todo from server\nexport const deleteTodo = (id) => async (dispatch) => {\n  await axios\n    .delete(`${process.env.REACT_APP_API_URL}/todo/${id}`, config)\n    .then((res) => {\n      dispatch({\n        type: DELETE_TODO,\n        payload: id,\n      });\n    })\n    .catch((err) => {\n      dispatch({\n        type: TODO_ERRORS,\n        payload: err.response.data.errors,\n      });\n    });\n};\n\n//update a todo item\nexport const updateTodo = (id, item) => async (dispatch) => {\n  await axios\n    .post(`${process.env.REACT_APP_API_URL}/updatetodo/${id}`, item, config)\n    .then((res) => {\n      dispatch({\n        type: UPDATE_TODO,\n        payload: res.data,\n      });\n      M.toast({ html: success_message_with_button('edit', res.data.message) });\n\n    })\n    .catch((err) => {\n      dispatch({\n        type: TODO_ERRORS,\n        payload: err.response.data.errors,\n      });\n      \n    });\n};\n//update a todo item\nexport const updateStatus= (id, status) => async (dispatch) => {\n  let stat = { status: status }\n  await axios\n    .post(`${process.env.REACT_APP_API_URL}/updatestatus/${id}`, stat, config)\n    .then((res) => {\n      M.toast({ html: success_message(res.data.message) });\n      dispatch({\n        type: CLEAR_TODO_ERRORS\n      })\n    })\n    .catch((err) => {\n      let errors = err.response.data.errors\n      M.toast({ html: error_message(errors[Object.keys(errors)[0]]) });\n      \n    });\n};\n\n//set the current\nexport const setCurrent = (data)  => {\n  return{\n    type: GET_TODO,\n    payload: data,\n};\n};\n\n//clear todo errors\nexport const clearErrors = () => {\n  return{\n    type: CLEAR_TODO_ERRORS,\n  } \n};\n\n//clear stodos\nexport const clearTodos = () => {\n  return {\n    type: CLEAR_TODOS,\n  };\n};\n\n//clear current\nexport const clearCurrent = () => {\n  return {\n    type: CLEAR_TODO_CURRENT,\n  };\n};\n\n//set loading\nexport const setLoading = () => {\n  console.log(\"loadingS\");\n  return {\n    type: SET_TODO_LOADING,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}